<!-- Generated by codeindex at 2026-02-11T20:03:45+08:00 -->

# scripts

## Overview

- **Files**: 4
- **Symbols**: 19

## Files

### check_version_consistency.py
_Check version consistency across all project files.

Single Source of Truth: pyproject.toml [project] version
All other version references should match._

**Functions:**
- `def get_pyproject_version() -> str`
- `def check_init_py(expected: str) -> list[str]`
- `def check_markdown_files(expected: str, fix: bool = False) -> list[str]`
- `def check_changelog(expected: str) -> list[str]`
- `def main()`

**Usage:**
```bash
python scripts/check_version_consistency.py          # Check
python scripts/check_version_consistency.py --fix     # Fix markdown files
```

### diagnose_ai_failures.py
_AI Enhancement 失败诊断工具

用于分析为什么AI增强会失败，提供具体的改进建议。_

**Functions:**
- `def analyze_directory_prompt_size(dir_path: Path, config: Config) -> dict`
- `def estimate_timeout_needed(analysis: dict) -> int`
- `def suggest_improvements(analysis: dict, timeout_config: int) -> list[str]`
- `def analyze_symbol_distribution(parse_results: list) -> dict`
- `def main()`

### hierarchical_strategy.py
_Advanced parallel processing strategy for codeindex._

**class** `class DirectoryNode`
> Represents a directory in the processing hierarchy.

**Functions:**
- `def build_directory_tree(
    directories: List[Path],
    config
) -> List[DirectoryNode]`
- `def detect_dependencies(
    nodes: List[DirectoryNode],
    config
) -> None`
- `def create_processing_batches(
    nodes: List[DirectoryNode],
    max_parallel: int
) -> List[List[DirectoryNode]]`
- `def hierarchical_scan(
    root_dir: Path,
    config,
    max_parallel: int = 8
)`
- `def resolve_import_to_directory(import_module: str, current_dir: Path) -> Path | None`

### validate_php_project.py
_验证PHP项目的符号提取效果

用于测试和对比改进前后的效果_

**Functions:**
- `def analyze_file(file_path: Path, scorer=None)`
- `def main()`

## Dependencies

- codeindex.config
- codeindex.invoker
- codeindex.parallel
- codeindex.parser
- codeindex.scanner
- codeindex.symbol_scorer
- codeindex.writer
- collections
- dataclasses
- pathlib
- re
- rich.console
- rich.panel
- rich.table
- sys
- typing

---

## Recent Changes

**Commit ``**: 

Changed files:
- `validate_real_projects.py`
