<!-- Generated by codeindex at 2026-01-23T11:52:48+08:00 -->

# README_AI.md - tests

## Purpose

Test suite for the codeindex parser module, validating source code parsing capabilities for both Python and PHP languages. Tests cover function extraction, class/method parsing, import detection, docstring handling, and PHP-specific features like visibility modifiers, inheritance, and properties.

## Architecture

```
tests/
├── __init__.py          # Package marker
└── test_parser.py       # Parser unit tests using pytest + tempfile fixtures
```

The tests use a fixture-based approach where temporary source files are created, parsed by `parse_file()`, and the resulting `ParseResult` objects are validated against expected symbols, imports, and docstrings.

## Key Components

| Component | Role |
|-----------|------|
| `test_parse_simple_function()` | Validates extraction of standalone function signatures and docstrings |
| `test_parse_class_with_methods()` | Verifies class and method symbol extraction with hierarchy |
| `test_parse_imports()` | Tests import statement parsing (both `import` and `from...import`) |
| `test_parse_module_docstring()` | Confirms module-level docstring detection |
| `test_parse_nonexistent_file()` | Error handling for missing files |
| `test_parse_php_class_with_inheritance()` | Validates PHP class parsing with `extends` and `implements` |
| `test_parse_php_method_visibility()` | Tests PHP method visibility modifiers (public/private/protected/static) |
| `test_parse_php_properties()` | Verifies PHP class property extraction with types and visibility |
| `test_parse_php_function()` | Validates standalone PHP function parsing with typed signatures |

## Consumes

| Module | Import | Purpose |
|--------|--------|---------|
| `codeindex.parser` | `parse_file` | Core parsing function under test |
| `pathlib` | `Path` | File path handling for temp files |
| `pytest` | - | Test framework |
| `tempfile` | - | Temporary file creation for test fixtures |

## Provides

| Export | Consumer | Purpose |
|--------|----------|---------|
| Test functions | pytest runner | Automated validation of parser correctness |
