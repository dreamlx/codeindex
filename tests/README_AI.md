<!-- Generated by codeindex at 2026-02-10T18:49:11+08:00 -->

# README_AI.md - tests

## Overview

- **Files**: 71
- **Symbols**: 1262+
- **Subdirectories**: 1

## Subdirectories

- **extractors/** - _Tests for route extractors._

## Files

- __init__.py
- **conftest.py** - create_mock_symbol, create_mock_parse_result, mock_config
- __init__.py
- **test_spring.py** - TestBasicRouteExtraction, TestMultipleRoutes, TestControllerAnnotation
- **test_thinkphp.py** - TestThinkPHPRouteExtractor, test_extract_routes_only_public_methods
- **test_thinkphp_description.py** - TestThinkPHPDescriptionExtraction
- **test_adaptive_config.py** - TestAdaptiveSymbolsConfig, TestConfigurationValidation, TestExpectedDefaults
- **test_adaptive_selector.py** - TestAdaptiveSymbolSelectorBase, TestSizeCategoryDetermination, TestConstraintApplication
- **test_ai_helper.py** - test_aggregate_multiple_parse_results, test_aggregate_single_parse_result, test_aggregate_empty_parse_results
- **test_backward_compatibility.py** - TestBackwardCompatibility
- **test_cli_docstring_options.py** - TestDocstringCLIOptions, TestDocstringHelp
- **test_cli_hooks.py** - TestHookManager, TestHookGeneration, TestBackupAndRestore
- **test_cli_json.py** - TestScanJSONOutput, TestScanAllJSONOutput, TestJSONErrorHandling
- **test_cli_parse.py** - TestCliParse. Tests `parse` command: basic functionality (Python/PHP/Java JSON output, help text, version compatibility), JSON format validation (required fields, symbols structure, optional fields, round-trip, consistency with scan), error handling (file not found, unsupported language, syntax errors, empty files, permission denied), framework features (ThinkPHP routes, Spring annotations, inheritance), and performance benchmarks (<0.5s for small files, <3s for large files).
- **test_cli_tech_debt.py** - TestTechDebtCommand, TestTechDebtIntegration, sample_files
- **test_config_adaptive.py** - TestSymbolsConfigAdaptive, TestConfigLoadingAdaptive, TestConfigurationMerging
- **test_dataclass_structure.py** - TestInheritanceDataclass, TestImportWithAlias, TestParseResultWithInheritances
- **test_directory_tree.py** - _create_test_structure, test_directory_tree_build, test_directory_tree_levels
- **test_docstring_config.py** - TestDocstringConfig, TestBackwardCompatibility
- **test_docstring_processor.py** - TestDocstringProcessor
- **test_error_handling.py** - TestCommandLevelErrors, TestErrorObjectStructure, TestFileLevelErrors
- **test_file_classifier.py** - test_classify_tiny_file, test_classify_small_file, test_classify_medium_file
- **test_help_system_bdd.py** - BDD tests for Enhanced Help System (Epic 15 Story 15.3). Tests help command execution and output validation: parameter descriptions, range information, structured formatting (tables/headers), terminal readability, configuration examples, YAML syntax examples, current value display from .codeindex.yaml, and warning messages. Fixtures: help_context (command execution state), cli_available (CLI availability check). Step functions handle config creation with specific parameter values, CPU core mocking, command execution with output capture, and comprehensive output assertions (text matching, formatting validation, example presence, exit code verification).
- **test_hooks_config.py** - TestHooksConfig, TestPostCommitConfig
- **test_init_wizard_bdd.py** - BDD tests for Interactive Setup Wizard (Epic 15 Story 15.1). Tests wizard execution flow with full implementation integration: language detection (detect_languages), framework detection (detect_frameworks), pattern inference (infer_include_patterns, infer_exclude_patterns), performance optimization (calculate_parallel_workers, calculate_batch_size), configuration generation (generate_config_yaml), and CODEINDEX.md creation (create_codeindex_md). Validates end-to-end wizard workflow from project scanning to config file creation with accurate values and zero-input automation support.
- **test_java_annotations.py** - TestClassAnnotations, TestMethodAnnotations, TestFieldAnnotations
- **test_java_calls.py** - TestBasicMethodCalls, TestConstructorCalls, TestStaticImportResolution, TestFullQualifiedNameCalls, TestMethodReferences, TestProjectInternalFiltering, TestEdgeCases, TestAnnotationBasedCalls. Validates fully-qualified caller names (e.g., com.example.UserService.createUser) for accurate call graph analysis, ensuring package.Class.method format in all assertions.
- **test_java_edge_cases.py** - TestNestedClasses, TestComplexGenerics, TestLongSignatures
- **test_java_error_recovery.py** - TestSyntaxErrors, TestIncompleteDeclarations, TestMalformedGenerics
- **test_java_generic_bounds.py** - TestSingleExtendsBound, TestMultipleBounds, TestWildcardBounds
- **test_java_inheritance.py** - TestBasicInheritance, TestGenericTypes, TestImportResolution, TestNestedClasses, TestRealWorldFrameworks, TestEdgeCases
- **test_java_lambda.py** - TestSimpleLambda, TestLambdaWithParameters, TestBlockLambda
- **test_java_lombok.py** - TestBasicLombokAnnotations, TestConstructorAnnotations, TestBuilderAnnotation
- **test_java_module.py** - TestBasicModuleDeclaration, TestRequiresDirective, TestExportsDirective
- **test_java_parser.py** - TestJavaParserBasics, TestJavaSymbolExtraction, TestJavaImports
- **test_java_spring.py** - TestSpringControllerLayer, TestSpringServiceLayer, TestSpringRepositoryLayer
- **test_java_throws.py** - TestSingleThrows, TestMultipleThrows, TestGenericThrows
- **test_json_output.py** - TestSymbolSerialization, TestImportSerialization, TestParseResultSerialization
- **test_loomgraph_integration.py** - TestLoomGraphJSONFormat, TestLoomGraphDataMapping, TestLoomGraphRealWorldExample
- **test_parallel_scan.py** - TestParallelScanning, TestParallelPerformance, TestParallelCorrectness
- **test_parser.py** - test_parse_simple_function, test_parse_class_with_methods, test_parse_imports
- **test_php_comment_extraction.py** - TestPHPCommentExtraction
- **test_php_docstring_extraction.py** - TestPHPDocstringExtraction, TestSmartWriterIntegration, TestPHPParserEdgeCases
- **test_php_import_alias.py** - TestPHPImportAliasBasic, TestPHPImportAliasGroupImports, TestPHPImportAliasNamespace
- **test_php_inheritance.py** - TestPHPInheritanceBasic, TestPHPInheritanceNamespace, TestPHPInheritanceModifiers
- **test_php_loomgraph_integration.py** - TestPHPLoomGraphJSONFormat, TestPHPLoomGraphRealWorld, TestPHPLoomGraphEdgeCases
- **test_project_index_semantic.py** - TestExtractModulePurpose, TestProjectIndexGeneration, TestBDDProjectIndex
- **test_python_calls.py** - TestBasicFunctionCalls, TestMethodCalls, TestConstructorCalls, TestAliasResolution, TestDecoratorCalls, TestProjectInternalFiltering, TestEdgeCases. Tests document AST-level classification decisions: module.function() classified as METHOD (requires semantic analysis for FUNCTION), local variable methods preserved as-is (type inference out of scope), constructors formatted with .__init__ suffix for semantic clarity.
- **test_python_docstring_description.py** - TestPythonDocstringDescription
- **test_python_import_alias.py** - TestImportAsBasic, TestFromImportAs, TestComplexScenarios
- **test_python_inheritance.py** - TestSingleInheritance, TestMultipleInheritance, TestNoInheritance
- **test_route_extractor.py** - TestExtractionContext, TestRouteExtractor
- **test_route_info.py** - TestRouteInfoLineNumber
- **test_route_registry.py** - TestFrameworkExtractor, AnotherFrameworkExtractor, TestRouteExtractorRegistry
- **test_route_table_description.py** - TestRouteTableDescription
- **test_route_table_display.py** - TestRouteTableDisplay
- **test_semantic_extractor.py** - TestDirectoryContext, TestBusinessSemantic, TestSemanticExtractor
- **test_smart_writer.py** - _create_mock_parse_result, test_smart_writer_overview_level, test_smart_writer_navigation_level
- **test_smart_writer_adaptive.py** - TestSmartWriterAdaptiveDisabled, TestSmartWriterAdaptiveEnabled, TestRealWorldScenarios
- **test_smart_writer_docstring.py** - TestSmartWriterDocstringIntegration, TestSmartWriterProcessorFactory
- **test_smart_writer_integration.py** - TestSmartWriterRouteIntegration
- **test_smart_writer_semantic.py** - TestSemanticConfig, TestSmartWriterSemanticIntegration, TestBDDSemanticIntegration
- **test_story_4_4_integration.py** - TestStory44EndToEnd, TestStory44PerformanceValidation
- **test_symbol_overload.py** - TestSymbolOverloadAnalysis, TestSymbolCountDetection, TestNoiseRatioDetection
- **test_symbol_scorer.py** - TestSymbolScorerBase, TestVisibilityScoring, TestSemanticScoring
- **test_tech_debt_bdd.py** - tech_debt_detector_fixture, symbol_scorer_fixture, file_with_lines
- **test_tech_debt_detector.py** - TestDebtSeverity, TestDebtIssue, TestDebtAnalysisResult
- **test_tech_debt_formatters.py** - TestConsoleFormatter, TestMarkdownFormatter, TestJSONFormatter
- **test_tech_debt_reporter.py** - TestFileReport, TestTechDebtReport, TestTechDebtReporter
- **test_thinkphp_route_extractor.py** - TestThinkPHPRouteLineNumbers, test_extract_routes_only_public_methods
- **test_windows_path_optimization.py** - TestRelativePathOptimization, TestAbsolutePathBackwardCompatibility, TestPathLengthReduction, TestWindowsCrossDrive, TestSymlinkHandling, TestPathSeparatorNormalization, TestExistingScannerBehavior. Tests Windows path length optimization (Issue #8): verifies relative path usage reduces path lengths, maintains backward compatibility with absolute paths, handles cross-drive scenarios, symlink resolution, and cross-platform path separator normalization.

---

## Recent Changes

**test_init_wizard_bdd.py**: Enhanced test implementation to integrate full wizard module functions. Replaced placeholder skip logic with actual calls to `init_wizard` module functions (detect_languages, detect_frameworks, infer_patterns, calculate_performance, generate_config_yaml, create_codeindex_md). Tests now validate complete wizard workflow: project scanning → language detection → pattern inference → config generation → file creation. Improved step functions to generate and verify .codeindex.yaml content with user choices applied, validate CODEINDEX.md creation, and ensure accurate calculated values (parallel_workers, batch_size) match expected outputs. Tests support empty/minimal project scenarios with proper validation logic.

**test_help_system_bdd.py**: New BDD test suite for Enhanced Help System (Story 15.3). Implements comprehensive test coverage for help command functionality including parameter descriptions, range validation, structured output formatting, terminal readability checks, configuration examples, and YAML syntax validation. Test fixtures manage command execution context and CLI availability verification. Step definitions handle dynamic config file creation with specific parameter values, CPU core mocking for performance calculations, command execution with output capture, and multi-faceted output assertions covering text matching, formatting validation, example presence, and exit code verification.
