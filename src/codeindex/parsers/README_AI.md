<!-- Generated by codeindex at 2026-02-07T23:18:57+08:00 -->

# README_AI.md - parsers

## Overview

- **Files**: 5
- **Symbols**: 4 classes, 3 functions

## Files

### __init__.py
_Language-specific parser modules.

This package contains modular parsers for different programming languages.
Each language has its own parser module that implements the BaseLanguageParser interface._

**Exports:**
- `BaseLanguageParser`
- `PythonParser`
- `get_node_text`
- `count_arguments`

### base.py
_Base class for language parsers.

This module defines the abstract interface that all language-specific parsers must implement.
It provides a consistent API for parsing different programming languages using tree-sitter._

**Classes:**
- `class BaseLanguageParser(ABC)` - Abstract base class for language-specific parsers

**Methods:**
- `def __init__(self, parser: Parser)` - Initialize the language parser
- `def extract_symbols(self, tree: Tree, source_bytes: bytes) -> list` - Extract symbols (classes, functions, methods) from the parse tree
- `def extract_imports(self, tree: Tree, source_bytes: bytes) -> list` - Extract import statements from the parse tree
- `def extract_calls(self, tree: Tree, source_bytes: bytes, symbols: list, imports: list) -> list` - Extract function/method call relationships
- `def extract_inheritances(self, tree: Tree, source_bytes: bytes) -> list` - Extract class inheritance relationships
- `def parse(self, path: Path)` - Parse a source file using this language parser (main entry point)

### utils.py
_Utility functions for language parsers.

This module contains helper functions that are shared across multiple language parsers._

**Functions:**
- `def get_node_text(node: Node, source_bytes: bytes) -> str` - Extract text from a tree-sitter node
- `def count_arguments(args_node: Node) -> Optional[int]` - Count arguments in argument_list node (best-effort, works across languages)

### python_parser.py
_Python language parser.

This module provides the PythonParser class that implements Python-specific
symbol extraction, import resolution, and call relationship analysis using tree-sitter._

**Classes:**
- `class PythonParser(BaseLanguageParser)` - Python language parser

**Public Methods:**
- `def extract_symbols(self, tree: Tree, source_bytes: bytes) -> list` - Extract symbols (classes, functions, methods) from the parse tree
- `def extract_imports(self, tree: Tree, source_bytes: bytes) -> list` - Extract import statements from the parse tree
- `def extract_calls(self, tree: Tree, source_bytes: bytes, symbols: list, imports: list) -> list` - Extract function/method call relationships from the parse tree
- `def extract_inheritances(self, tree: Tree, source_bytes: bytes) -> list` - Extract class inheritance relationships from the parse tree
- `def parse(self, path: Path)` - Parse a Python source file (overrides base parse() to add module docstring extraction)

**Features:**
- Symbol extraction: classes, functions, methods (including nested classes)
- Import handling: regular imports, from-imports, aliased imports (e.g., `import pandas as pd`)
- Inheritance tracking: class inheritance relationships
- Call relationship analysis (Epic 11, Story 11.1):
  - Function calls, method calls, constructor calls
  - Import alias resolution (e.g., `pd.read_csv` → `pandas.read_csv`)
  - Self method resolution (e.g., `self.method()` → `ClassName.method()`)
  - Super method resolution (e.g., `super().method()` → `ParentClass.method()`)
  - Decorator calls (Phase 1: simple decorators only)
  - Call type classification: FUNCTION, METHOD, STATIC_METHOD, CONSTRUCTOR, DYNAMIC

### java_parser.py
_Java language parser module.

This module provides a convenient interface for parsing Java files.
The actual implementation is in codeindex.parser._

**Functions:**
- `def is_java_file(path: str) -> bool`
- `def parse_java_file(file_path: str, content: str) -> ParseResult`

## Architecture

The parsers package follows a plugin-based architecture:

1. **BaseLanguageParser** - Abstract interface defining the contract for all language parsers
2. **Language-specific parsers** - Implementations for Python (PythonParser), PHP, Java, etc.
3. **Shared utilities** - Common helper functions (get_node_text, count_arguments)
4. **Parser workflow**: File → tree-sitter parse → extract symbols/imports/calls/inheritances → ParseResult

## Dependencies

- tree_sitter (Parser, Tree, Node)
- abc (ABC, abstractmethod)
- pathlib (Path)
- typing (Optional)
- codeindex.parser (Call, CallType, Import, Inheritance, Symbol, ParseResult)
