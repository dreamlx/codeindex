# Epic 7: Java Support - å½“å‰å¼€å‘çŠ¶æ€

**æ›´æ–°æ—¶é—´**: 2026-02-05
**åˆ†æ”¯**: `feature/epic7-java-support`
**å½“å‰Story**: Story 7.1.1 - tree-sitter-java Integration
**å®Œæˆåº¦**: 60% (3/5 tasks)

---

## âœ… å·²å®Œæˆå·¥ä½œ

### Story 7.1.1: tree-sitter-java Integration

**ä»»åŠ¡è¿›åº¦**: 3/5 å®Œæˆ

#### âœ… Task 7.1.1.1: æ·»åŠ ä¾èµ– (100%)
```toml
# pyproject.toml
dependencies = [
    # ...existing...
    "tree-sitter-java>=0.23.0",  # â† æ–°å¢
]
```

**ä¸‹ä¸€æ­¥ï¼ˆç”¨æˆ·ï¼‰**: å®‰è£…ä¾èµ–
```bash
pip install -e ".[dev]"
# æˆ–è€…
pip install tree-sitter-java>=0.23.0
```

#### âœ… Task 7.1.1.2: åˆ›å»ºæµ‹è¯•fixtures (100%)

**å·²åˆ›å»º8ä¸ªJavaæµ‹è¯•æ–‡ä»¶**:
```
tests/fixtures/java/
â”œâ”€â”€ simple_class.java       # åŸºç¡€Userç±»ï¼ˆå­—æ®µ+æ–¹æ³•+æ„é€ å‡½æ•°ï¼‰
â”œâ”€â”€ interface.java          # UserServiceæ¥å£
â”œâ”€â”€ enum.java              # UserStatusæšä¸¾ï¼ˆå¸¦æ–¹æ³•ï¼‰
â”œâ”€â”€ imports.java           # å¯¼å…¥è¯­å¥æµ‹è¯•ï¼ˆæ™®é€š/é™æ€/é€šé…ç¬¦ï¼‰
â”œâ”€â”€ generics.java          # æ³›å‹ç±»ï¼ˆBox<T>, Pair<K,V>, Repository<T,ID>ï¼‰
â”œâ”€â”€ record.java            # Java 14+ Recordç‰¹æ€§
â”œâ”€â”€ sealed_class.java      # Java 17+ Sealed classç‰¹æ€§
â””â”€â”€ spring_controller.java # Spring REST Controllerï¼ˆè·¯ç”±æµ‹è¯•ç”¨ï¼‰
```

**è¦†ç›–èŒƒå›´**:
- âœ… Java 8 åŸºç¡€è¯­æ³•
- âœ… Java 14+ Records
- âœ… Java 17+ Sealed classes
- âœ… Spring Bootæ³¨è§£ï¼ˆ@RestController, @GetMapping, ç­‰ï¼‰
- âœ… æ³›å‹ã€JavaDocã€åŒ…å£°æ˜

#### âœ… Task 7.1.1.3: ç¼–å†™TDDæµ‹è¯• (100% - REDé˜¶æ®µ)

**å·²åˆ›å»ºæµ‹è¯•æ–‡ä»¶**: `tests/test_java_parser.py`

**æµ‹è¯•ç»Ÿè®¡**:
- æ€»æµ‹è¯•æ•°: 30+
- æµ‹è¯•ç±»: 7ä¸ª
- è¦†ç›–é¢†åŸŸ:
  1. âœ… åŸºç¡€åŠŸèƒ½ï¼ˆæ–‡ä»¶æ£€æµ‹ã€è§£æå™¨åˆå§‹åŒ–ï¼‰
  2. âœ… ç¬¦å·æå–ï¼ˆç±»ã€æ¥å£ã€æšä¸¾ã€æ–¹æ³•ã€å­—æ®µï¼‰
  3. âœ… å¯¼å…¥è¯­å¥ï¼ˆæ™®é€š/é™æ€/é€šé…ç¬¦ï¼‰
  4. âœ… æ³›å‹æ”¯æŒ
  5. âœ… ç°ä»£Javaè¯­æ³•ï¼ˆRecord, Sealed classï¼‰
  6. âœ… JavaDocæå–
  7. âœ… æ–‡ä»¶å…ƒæ•°æ®

**å½“å‰çŠ¶æ€**: ğŸ”´ **REDé˜¶æ®µ**
- æ‰€æœ‰æµ‹è¯•æ ‡è®°ä¸º `@pytest.mark.skip`
- é¢„æœŸè¡Œä¸ºï¼šç§»é™¤skipåæµ‹è¯•ä¼š**å¤±è´¥**ï¼ˆè¿™æ˜¯æ­£å¸¸çš„TDDæµç¨‹ï¼‰

**è¿è¡Œæµ‹è¯•**:
```bash
# æŸ¥çœ‹æµ‹è¯•åˆ—è¡¨ï¼ˆä¸æ‰§è¡Œï¼‰
pytest tests/test_java_parser.py --collect-only

# è¿è¡Œæµ‹è¯•ï¼ˆå½“å‰ä¼šè·³è¿‡æ‰€æœ‰æµ‹è¯•ï¼‰
pytest tests/test_java_parser.py -v

# ç§»é™¤skipåï¼ˆGREENé˜¶æ®µä¹‹å‰ä¸è¦è¿™æ ·åšï¼‰
# pytest tests/test_java_parser.py -v -m "not skip"
```

---

## â³ å¾…å®Œæˆå·¥ä½œ

### Task 7.1.1.4: å®ç°Java Parser (GREENé˜¶æ®µ) - æˆ‘æ¥åš

**é¢„è®¡æ—¶é—´**: 4å°æ—¶
**æ–‡ä»¶åˆ›å»º**:
```
src/codeindex/parsers/
â””â”€â”€ java_parser.py  (æ–°å»º)
```

**éœ€è¦å®ç°çš„åŠŸèƒ½**:
1. `get_java_parser()` - åˆå§‹åŒ–tree-sitter-javaè§£æå™¨
2. `parse_java_file()` - è§£æJavaæ–‡ä»¶ï¼Œè¿”å›ParseResult
3. `_extract_symbols()` - æå–ç±»ã€æ¥å£ã€æšä¸¾ã€æ–¹æ³•ç­‰
4. `_extract_imports()` - æå–importè¯­å¥
5. `_extract_module_docstring()` - æå–JavaDoc
6. `is_java_file()` - æ£€æµ‹.javaæ–‡ä»¶

**æˆ‘ä¼šè¿™æ ·åš**:
1. åˆ›å»º`java_parser.py`éª¨æ¶
2. å®ç°æœ€å°åŠŸèƒ½è®©ç¬¬ä¸€ä¸ªæµ‹è¯•é€šè¿‡
3. é€æ­¥è®©æ›´å¤šæµ‹è¯•é€šè¿‡
4. é‡æ„ä¼˜åŒ–ä»£ç 

**é¢„æœŸç»“æœ**: ç§»é™¤`@pytest.mark.skip`åï¼Œæ‰€æœ‰30+æµ‹è¯•**é€šè¿‡** âœ…

### Task 7.1.1.5: é‡æ„ä¼˜åŒ– (REFACTORé˜¶æ®µ) - æˆ‘æ¥åš

**é¢„è®¡æ—¶é—´**: 1å°æ—¶
**å†…å®¹**:
- æå–é€šç”¨é€»è¾‘
- ä¼˜åŒ–æ€§èƒ½
- æ·»åŠ ç±»å‹æç¤º
- å®Œå–„æ–‡æ¡£å­—ç¬¦ä¸²
- è¿è¡Œlinter

---

## ğŸ¯ ä½ çš„ä»»åŠ¡ï¼ˆç”¨æˆ·æµ‹è¯•ï¼‰

### ğŸ“ ç°åœ¨å¯ä»¥åšçš„

#### 1. å®‰è£…ä¾èµ–
```bash
cd /Users/dreamlinx/Dropbox/Projects/codeindex
git pull  # ç¡®ä¿æ˜¯æœ€æ–°ä»£ç 
pip install -e ".[dev]"
```

#### 2. éªŒè¯æµ‹è¯•fixtureså¯ä»¥æŸ¥çœ‹
```bash
# æŸ¥çœ‹æµ‹è¯•æ–‡ä»¶
ls -lh tests/fixtures/java/
cat tests/fixtures/java/simple_class.java

# è¿è¡Œæµ‹è¯•ï¼ˆå½“å‰ä¼šè·³è¿‡ï¼‰
pytest tests/test_java_parser.py -v
```

#### 3. å‡†å¤‡ä¸€ä¸ªçœŸå®Javaé¡¹ç›®è¿›è¡Œæµ‹è¯•

**æ¨èé€‰æ‹©** (ä»æ˜“åˆ°éš¾):

##### Option A: Spring PetClinic (æœ€æ¨è â­â­â­â­â­)
```bash
cd ~/Projects  # æˆ–ä½ çš„é¡¹ç›®ç›®å½•
git clone https://github.com/spring-projects/spring-petclinic.git
cd spring-petclinic

# æŸ¥çœ‹é¡¹ç›®ç»“æ„
tree -L 3 -I 'target|node_modules'
```

**ç‰¹ç‚¹**:
- âœ… Springå®˜æ–¹demoé¡¹ç›®
- âœ… çº¦5k LOCï¼Œä¸­ç­‰è§„æ¨¡
- âœ… æ ‡å‡†Spring Bootç»“æ„
- âœ… Mavené¡¹ç›®
- âœ… åŒ…å«REST APIç¤ºä¾‹
- âœ… æ–‡æ¡£é½å…¨

##### Option B: ä½ è‡ªå·±çš„Javaé¡¹ç›®

å¦‚æœä½ æœ‰ç°æˆçš„Spring Booté¡¹ç›®ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥æµ‹è¯•ã€‚

**è¦æ±‚**:
- âœ… ä½¿ç”¨Mavenæˆ–Gradle
- âœ… åŒ…å«Springæ³¨è§£ï¼ˆ@RestControllerç­‰ï¼‰
- âœ… ä»£ç é‡é€‚ä¸­ï¼ˆ1k-20k LOCï¼‰

##### Option C: å…¶ä»–å¼€æºé¡¹ç›®

- JHipster sample: https://github.com/jhipster/jhipster-sample-app
- Spring Boot Admin: https://github.com/codecentric/spring-boot-admin

### ğŸ“ å½“æˆ‘å®Œæˆå®ç°åï¼ˆé¢„è®¡ä»Šå¤©å†…ï¼‰

æˆ‘ä¼šé€šçŸ¥ä½ "**GREENé˜¶æ®µå®Œæˆ**"ï¼Œå±Šæ—¶ä½ éœ€è¦ï¼š

#### 1. æ‹‰å–æœ€æ–°ä»£ç 
```bash
cd /Users/dreamlinx/Dropbox/Projects/codeindex
git pull
pip install -e ".[dev]"  # ç¡®ä¿ä¾èµ–æœ€æ–°
```

#### 2. éªŒè¯æµ‹è¯•é€šè¿‡
```bash
pytest tests/test_java_parser.py -v
# é¢„æœŸ: 30+ tests passed âœ…
```

#### 3. æµ‹è¯•çœŸå®Javaé¡¹ç›®
```bash
# å‡è®¾ä½ å‡†å¤‡çš„é¡¹ç›®åœ¨ ~/Projects/spring-petclinic
cd /Users/dreamlinx/Dropbox/Projects/codeindex

# å°è¯•æ‰«æJavaé¡¹ç›®
codeindex scan ~/Projects/spring-petclinic/src/main/java

# æŸ¥çœ‹ç”Ÿæˆçš„README_AI.md
cat ~/Projects/spring-petclinic/src/main/java/README_AI.md
```

#### 4. åé¦ˆæµ‹è¯•ç»“æœ

**æˆåŠŸçš„æƒ…å†µ**:
```
âœ… README_AI.mdç”ŸæˆæˆåŠŸ
âœ… åŒ…å«Javaç±»å®šä¹‰
âœ… åŒ…å«æ–¹æ³•ç­¾å
âœ… JavaDocæ­£ç¡®æå–
```

**å¤±è´¥çš„æƒ…å†µ** (è¯·è¯¦ç»†è®°å½•):
```
âŒ å“ªäº›æ–‡ä»¶è§£æå¤±è´¥ï¼Ÿ
âŒ ç”Ÿæˆäº†ä»€ä¹ˆé”™è¯¯ä¿¡æ¯ï¼Ÿ
âŒ æ˜¯å¦æœ‰ç‰¹å®šçš„Javaè¯­æ³•å¯¼è‡´é—®é¢˜ï¼Ÿ
âŒ æˆªå›¾æˆ–å¤åˆ¶é”™è¯¯æ—¥å¿—
```

#### 5. æå‡ºæ”¹è¿›å»ºè®®

åŸºäºå®é™…ä½¿ç”¨ï¼Œåé¦ˆï¼š
- å“ªäº›åŠŸèƒ½ç¼ºå¤±ï¼Ÿ
- è¾“å‡ºæ ¼å¼æ˜¯å¦æ»¡æ„ï¼Ÿ
- æ˜¯å¦æœ‰è¯¯æŠ¥/æ¼æŠ¥ï¼Ÿ
- æ€§èƒ½æ˜¯å¦å¯æ¥å—ï¼Ÿ

---

## ğŸ”„ å¼€å‘æµç¨‹ï¼ˆæ•æ·è¿­ä»£ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ : å‡†å¤‡çœŸå®Javaé¡¹ç›®                          â”‚
â”‚  æˆ‘: å®ç°Java Parser (GREENé˜¶æ®µ)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æˆ‘: é€šçŸ¥ä½ "GREENé˜¶æ®µå®Œæˆ"                     â”‚
â”‚  ä½ : æ‹‰å–ä»£ç ï¼Œè¿è¡Œæµ‹è¯•                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ : æµ‹è¯•çœŸå®Javaé¡¹ç›®                          â”‚
â”‚  ä½ : åé¦ˆé—®é¢˜å’Œå»ºè®®                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æˆ‘: æ ¹æ®åé¦ˆä¿®æ”¹                             â”‚
â”‚  æˆ‘: æäº¤ä¿®å¤                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä½ : å†æ¬¡æµ‹è¯•ï¼ŒéªŒè¯ä¿®å¤                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
          å¾ªç¯ç›´åˆ°æ»¡æ„ âœ…
```

---

## ğŸ“Š Story 7.1.1 å®Œæ•´ä»»åŠ¡æ¸…å•

- [x] Task 7.1.1.1: æ·»åŠ ä¾èµ– (100%)
- [x] Task 7.1.1.2: åˆ›å»ºæµ‹è¯•fixtures (100%)
- [x] Task 7.1.1.3: ç¼–å†™TDDæµ‹è¯• - REDé˜¶æ®µ (100%)
- [ ] Task 7.1.1.4: å®ç°Java Parser - GREENé˜¶æ®µ (0%)
- [ ] Task 7.1.1.5: é‡æ„ä¼˜åŒ– - REFACTORé˜¶æ®µ (0%)

**é¢„è®¡å®Œæˆæ—¶é—´**: ä»Šå¤©å†…ï¼ˆStory 7.1.1å®Œæ•´å®Œæˆï¼‰

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- **è¯¦ç»†è§„åˆ’**: `EPIC7_JAVA_ROADMAP.md`
- **æµ‹è¯•ç­–ç•¥**: `EPIC7_TEST_STRATEGY.md`
- **Storyåˆ†è§£**: `docs/planning/active/epic7-story-breakdown.md`

---

## ğŸ’¬ æ²Ÿé€šæ–¹å¼

### å¦‚æœä½ æœ‰é—®é¢˜

**ç°åœ¨å°±å¯ä»¥é—®**:
- æµ‹è¯•fixturesæ˜¯å¦åˆç†ï¼Ÿ
- éœ€è¦æ·»åŠ å…¶ä»–æµ‹è¯•åœºæ™¯å—ï¼Ÿ
- æµ‹è¯•é¡¹ç›®é€‰æ‹©æ˜¯å¦OKï¼Ÿ

**å®ç°å®Œæˆåä¼šé—®ä½ **:
- æµ‹è¯•æ˜¯å¦é€šè¿‡ï¼Ÿ
- çœŸå®é¡¹ç›®æ‰«ææ˜¯å¦æˆåŠŸï¼Ÿ
- è¾“å‡ºè´¨é‡æ˜¯å¦æ»¡æ„ï¼Ÿ

### åé¦ˆæ ¼å¼å»ºè®®

```markdown
## æµ‹è¯•ç¯å¢ƒ
- Javaç‰ˆæœ¬: openjdk 17.0.2
- é¡¹ç›®: spring-petclinic
- ä»£ç é‡: çº¦5k LOC

## æµ‹è¯•ç»“æœ
âœ… åŸºç¡€ç±»è§£æï¼šæ­£å¸¸
âœ… æ¥å£è§£æï¼šæ­£å¸¸
âŒ Springæ³¨è§£ï¼šæœªè¯†åˆ«åˆ°@RestController
âŒ æ³›å‹ç±»ï¼šList<User>æ˜¾ç¤ºä¸ºList

## é”™è¯¯æ—¥å¿—
[ç²˜è´´é”™è¯¯ä¿¡æ¯]

## å»ºè®®
1. å¸Œæœ›æ”¯æŒSpringæ³¨è§£è·¯ç”±æå–
2. æ³›å‹ç±»å‹åº”è¯¥å®Œæ•´æ˜¾ç¤º
```

---

## ğŸš€ æ¥ä¸‹æ¥çš„Storyé¢„è§ˆ

### Story 7.1.2: Symbol Extraction - Classes & Methods (Day 3)

**ç›®æ ‡**: å®Œå–„ç¬¦å·æå–ï¼ˆç±»ä¿®é¥°ç¬¦ã€æ–¹æ³•ç­¾åã€æ³›å‹ç±»å‹ï¼‰

**ç­‰å¾…å½“å‰Storyå®Œæˆå¹¶é€šè¿‡ç”¨æˆ·æµ‹è¯•åå¼€å§‹**

### Story 7.2.1: Spring Route Extractor Plugin (Week 2)

**ç›®æ ‡**: æå–Spring Boot APIè·¯ç”±

**ç­‰å¾…Week 1å®Œæˆåå¼€å§‹**

---

**å½“å‰çŠ¶æ€**: ğŸŸ¢ ç­‰å¾…æˆ‘å®ŒæˆGREENé˜¶æ®µå®ç°
**ä½ çš„è¡ŒåŠ¨**: å‡†å¤‡ä¸€ä¸ªçœŸå®Javaé¡¹ç›®ï¼Œç­‰å¾…æˆ‘çš„é€šçŸ¥

**é¢„è®¡é€šçŸ¥æ—¶é—´**: ä»Šå¤©ï¼ˆ4å°æ—¶å†…ï¼‰

---

**æœ‰é—®é¢˜éšæ—¶é—®ï¼** ğŸ¤
