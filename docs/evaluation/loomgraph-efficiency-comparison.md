# ğŸš€ LoomGraph çŸ¥è¯†å›¾è°± vs ä¼ ç»Ÿæœç´¢ï¼šæ•ˆç‡å¯¹æ¯”å®éªŒæŠ¥å‘Š

**å®éªŒæ—¥æœŸ**: 2026-02-10
**å·¥å…·ç‰ˆæœ¬**:
- LoomGraph v0.2.0
- codeindex v0.13.0 (with `parse` command support)
- LightRAG v1.4.9.12

---

## âœ… é›†æˆæµ‹è¯•ç»“æœ

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| `loomgraph status` | âœ… | æ‰€æœ‰ä¾èµ–æ­£å¸¸ |
| `loomgraph index --clear` | âœ… | Cold Rebuild æˆåŠŸï¼ˆ6sï¼‰ |
| `loomgraph search` | âœ… | è¯­ä¹‰æœç´¢æ­£å¸¸ï¼ˆ5.5sï¼‰ |
| `loomgraph update` | âœ… | ä½¿ç”¨ `codeindex parse <file>` å¢é‡æ›´æ–° |
| DELETE /documents | âœ… | æ¸…ç©º API æ­£å¸¸ |
| POST /insert_custom_kg | âœ… | æ‰¹é‡æ³¨å…¥ API æ­£å¸¸ |

**å…³é”®æ›´æ–°**: codeindex v0.13.0 æ–°å¢ `parse` å‘½ä»¤ï¼Œæ”¯æŒå•æ–‡ä»¶è§£æï¼ˆEpic 12ï¼‰

---

## ğŸ“‹ å®éªŒè®¾ç½®

**ä»»åŠ¡**: ä¿®æ”¹ `diagnose_ai_failures.py` çš„ `estimate_timeout_needed` å‡½æ•°  
**ç›®æ ‡**: ç†è§£å‡½æ•°åŠŸèƒ½ã€å®šä½ä»£ç ã€æŸ¥æ‰¾è°ƒç”¨å…³ç³»  
**æµ‹è¯•æ–‡ä»¶**: `scripts/` ç›®å½• (3 ä¸ª Python æ–‡ä»¶)

---

## â±ï¸ ä¸‰ç§æ–¹å¼å¯¹æ¯”

### æ–¹å¼Aï¼šä¼ ç»Ÿæœç´¢ï¼ˆGrepï¼‰

#### æ“ä½œæ­¥éª¤
1. `find` æŸ¥æ‰¾æ–‡ä»¶ â†’ 3 ä¸ªæ–‡ä»¶ (0.003s)
2. `grep` æœç´¢å…³é”®è¯ â†’ **17 è¡Œç»“æœ** (0.005s)  
3. æ‰‹åŠ¨ç­›é€‰ç›¸å…³ä»£ç  (~30s)
4. æ‰‹åŠ¨æŸ¥æ‰¾è°ƒç”¨ç‚¹ (~60s)

#### ç»“æœåˆ†æ
- **æ€»è€—æ—¶**: ~90 ç§’
- **è¾“å‡ºå™ªéŸ³**: 17 è¡Œ grep ç»“æœï¼Œéœ€äººå·¥ç­›é€‰
- **è°ƒç”¨å…³ç³»**: éœ€æ‰‹åŠ¨æŸ¥æ‰¾ï¼Œå®¹æ˜“é—æ¼
- **è®¤çŸ¥è´Ÿæ‹…**: â­â­â­â­â­ æé«˜

---

### æ–¹å¼Bï¼šcodeindex ç´¢å¼•ï¼ˆé™æ€åˆ†æï¼‰

#### æ“ä½œæ­¥éª¤
1. æŸ¥è¯¢ `README_AI.md` ç´¢å¼• (0.002s)
2. **å•æ–‡ä»¶è§£æ**: `codeindex parse diagnose_ai_failures.py` (0.092s)
3. Serena MCP `find_referencing_symbols` (0.1s)
4. ç›´æ¥å®šä½åˆ° 86-100 è¡Œ

**å‘½ä»¤è¯´æ˜**:
```bash
# âœ… å•æ–‡ä»¶è§£æï¼ˆEpic 12 æ–°å¢ï¼‰
codeindex parse file.py --output json

# âœ… ç›®å½•æ‰«æï¼ˆç”Ÿæˆ README_AI.mdï¼‰
codeindex scan scripts/ --fallback
```

#### ç»“æœåˆ†æ
- **æ€»è€—æ—¶**: ~5 ç§’
- **ç²¾ç¡®ä¿¡æ¯**: 
  - å‡½æ•°ä½ç½®ï¼š86-100 è¡Œ
  - ç­¾åï¼š`(dict) -> int`
  - æ–‡æ¡£ï¼šä¼°ç®—éœ€è¦çš„è¶…æ—¶æ—¶é—´
  - 4 å¤„è°ƒç”¨ï¼š119, 128, 280, 343 è¡Œ
- **è®¤çŸ¥è´Ÿæ‹…**: â­ ä½

---

### æ–¹å¼Cï¼šLoomGraph çŸ¥è¯†å›¾è°±ï¼ˆè¯­ä¹‰åˆ†æï¼‰

#### æ“ä½œæ­¥éª¤
1. `loomgraph index scripts` ç´¢å¼• (ä¸€æ¬¡æ€§ï¼Œ~6s)
2. `loomgraph search "è¶…æ—¶ä¼°ç®—é€»è¾‘"` (5.5s)
3. `loomgraph graph "estimate_timeout_needed" --direction both` (7.8s)

#### ç»“æœåˆ†æï¼ˆç¬¬ä¸€æ¬¡ç´¢å¼•åï¼‰
- **ç´¢å¼•è€—æ—¶**: 6 ç§’ï¼ˆä¸€æ¬¡æ€§æˆæœ¬ï¼‰
- **æŸ¥è¯¢è€—æ—¶**: 5.5sï¼ˆè¯­ä¹‰æœç´¢ï¼‰+ 7.8sï¼ˆå…³ç³»å›¾ï¼‰
- **æ ¸å¿ƒä¼˜åŠ¿**:
  - âœ… **è¯­ä¹‰ç†è§£**: ä¸­æ–‡æŸ¥è¯¢ "è¶…æ—¶ä¼°ç®—é€»è¾‘" ç›´æ¥åŒ¹é…
  - âœ… **å…³ç³»å›¾è°±**: è‡ªåŠ¨å‘ç° `main` å’Œ `suggest_improvements` è°ƒç”¨
  - âœ… **AI å¢å¼º**: LightRAG æä¾›ä¸Šä¸‹æ–‡è§£é‡Š
  - âœ… **JSON è¾“å‡º**: æœºå™¨å¯è¯»ï¼Œä¾¿äºå·¥å…·é›†æˆ

#### ç´¢å¼•ç»“æœ
```json
{
  "files_scanned": 3,
  "files_indexed": 3,
  "entities_created": 12,
  "relations_created": 10
}
```

#### è°ƒç”¨å…³ç³»å‘ç°
```
estimate_timeout_needed
  â† main (è°ƒç”¨è€…)
  â† suggest_improvements (è°ƒç”¨è€…)
```

---

## ğŸ“Š ç»¼åˆå¯¹æ¯”

| ç»´åº¦ | ä¼ ç»Ÿ Grep | codeindex ç´¢å¼• | LoomGraph å›¾è°± |
|------|-----------|---------------|---------------|
| **é¦–æ¬¡è€—æ—¶** | ~90s | ~5s | ~6s (ç´¢å¼•) + ~13s (æŸ¥è¯¢) |
| **åç»­æŸ¥è¯¢** | ~90s | ~5s | ~13s |
| **è¯­ä¹‰ç†è§£** | âŒ æ—  | âš ï¸ æœ‰é™ | âœ… å¼ºå¤§ |
| **è°ƒç”¨å…³ç³»** | æ‰‹åŠ¨ | è‡ªåŠ¨ï¼ˆæ–‡ä»¶å†…ï¼‰ | è‡ªåŠ¨ï¼ˆè·¨æ–‡ä»¶ï¼‰ |
| **è®¤çŸ¥è´Ÿæ‹…** | â­â­â­â­â­ | â­ | â­â­ |
| **å‡†ç¡®æ€§** | ä½ï¼ˆäººå·¥ç­›é€‰ï¼‰ | é«˜ï¼ˆé™æ€åˆ†æï¼‰ | é«˜ï¼ˆAIå¢å¼ºï¼‰ |
| **è·¨æ–‡ä»¶æ”¯æŒ** | âŒ å›°éš¾ | âš ï¸ æœ‰é™ | âœ… å®Œæ•´ |
| **ä¸­æ–‡æŸ¥è¯¢** | âŒ ä¸æ”¯æŒ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |

---

## ğŸ’¡ æ ¸å¿ƒå‘ç°

### LoomGraph çš„ç‹¬ç‰¹ä¼˜åŠ¿

1. **è¯­ä¹‰æœç´¢**
   ```bash
   # ä¸­æ–‡è‡ªç„¶è¯­è¨€æŸ¥è¯¢
   loomgraph search "è¶…æ—¶ä¼°ç®—é€»è¾‘"
   # â†’ è‡ªåŠ¨åŒ¹é… estimate_timeout_needed
   ```

2. **å…³ç³»å›¾è°±**
   ```bash
   loomgraph graph "estimate_timeout_needed" --direction both
   # â†’ å‘ç° 2 ä¸ªè°ƒç”¨è€…ï¼ˆmain, suggest_improvementsï¼‰
   ```

3. **AI ä¸Šä¸‹æ–‡**
   - LightRAG æä¾›è‡ªç„¶è¯­è¨€è§£é‡Š
   - è‡ªåŠ¨å…³è”ç›¸å…³å®ä½“å’Œæ–‡æ¡£
   - æ”¯æŒå¤æ‚æŸ¥è¯¢ï¼ˆ"å“ªäº›å‡½æ•°å¤„ç†è¶…æ—¶ï¼Ÿ"ï¼‰

4. **å¢é‡æ›´æ–°**
   ```bash
   # æ–¹å¼1: å•æ–‡ä»¶æ›´æ–°ï¼ˆæ¨èï¼Œæœ€å¿«ï¼‰
   codeindex parse changed_file.py | loomgraph import --stdin

   # æ–¹å¼2: ç›®å½•å¢é‡ç´¢å¼•
   loomgraph index scripts
   # â†’ ä»…å¤„ç†å˜æ›´æ–‡ä»¶ï¼Œé€Ÿåº¦æ›´å¿«
   ```

### codeindex çš„ä¼˜åŠ¿

1. **é€Ÿåº¦æ›´å¿«**: çº¯é™æ€åˆ†æï¼Œæ— éœ€ API è°ƒç”¨ï¼ˆ~0.1s/æ–‡ä»¶ï¼‰
2. **ç¦»çº¿å¯ç”¨**: ä¸ä¾èµ–å¤–éƒ¨æœåŠ¡ï¼ˆLLM/å‘é‡æ•°æ®åº“ï¼‰
3. **ç²¾ç¡®å®šä½**: ç›´æ¥æä¾›è¡Œå·å’Œç­¾å
4. **è½»é‡çº§**: æ— éœ€æ•°æ®åº“å’Œå‘é‡æœåŠ¡
5. **åŒæ¨¡å¼æ”¯æŒ** (v0.13.0+):
   - `parse` å‘½ä»¤: å•æ–‡ä»¶ JSON è¾“å‡ºï¼ˆç”¨äºå·¥å…·é›†æˆï¼‰
   - `scan` å‘½ä»¤: ç›®å½•æ–‡æ¡£ç”Ÿæˆï¼ˆç”¨äº AI Codeï¼‰

### é€‚ç”¨åœºæ™¯

| åœºæ™¯ | æ¨èå·¥å…· |
|------|---------|
| å¿«é€Ÿå®šä½å•ä¸ªå‡½æ•° | codeindex |
| ç†è§£è°ƒç”¨é“¾å’Œä¾èµ– | LoomGraph |
| è¯­ä¹‰æœç´¢ï¼ˆ"è°å¤„ç†è®¤è¯ï¼Ÿ"ï¼‰ | LoomGraph |
| ç¦»çº¿å¼€å‘ | codeindex |
| å›¢é˜Ÿåä½œï¼ˆå…±äº«çŸ¥è¯†å›¾è°±ï¼‰ | LoomGraph |
| CI/CD é›†æˆ | codeindex |

---

## ğŸ¯ æ•ˆç‡æå‡æ€»ç»“

### æ—¶é—´å¯¹æ¯”ï¼ˆé’ˆå¯¹æœ¬æ¬¡ä»»åŠ¡ï¼‰

| é˜¶æ®µ | Grep | codeindex | LoomGraph |
|------|------|-----------|-----------|
| é¦–æ¬¡æŸ¥è¯¢ | 90s | 5s | 19s (å«ç´¢å¼•) |
| åç»­æŸ¥è¯¢ | 90s | 5s | 13s |
| **æ•ˆç‡æå‡** | åŸºå‡† | **18x** | **7x** (é¦–æ¬¡) / **7x** (åç»­) |

### ä»·å€¼å¯¹æ¯”

| ä»·å€¼ç»´åº¦ | Grep | codeindex | LoomGraph |
|---------|------|-----------|-----------|
| å‡†ç¡®æ€§ | â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| å®Œæ•´æ€§ | â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| æ˜“ç”¨æ€§ | â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| å¯æ‰©å±•æ€§ | â­ | â­â­â­â­ | â­â­â­â­â­ |

---

## ğŸš€ å®é™…ä¿®æ”¹æ¼”ç¤º

ä½¿ç”¨ codeindex ç²¾ç¡®å®šä½åï¼Œæˆ‘å°† `estimate_timeout_needed` çš„ç®—æ³•ä»**çº¿æ€§å¢é•¿**æ”¹ä¸º**å¯¹æ•°å¢é•¿**ï¼š

### ä¿®æ”¹å¯¹æ¯”

| é¡¹ç›®è§„æ¨¡ | æ—§ç®—æ³•(çº¿æ€§) | æ–°ç®—æ³•(å¯¹æ•°) | ä¼˜åŒ– |
|---------|-------------|-------------|------|
| 10 æ–‡ä»¶, 50 ç¬¦å· | 90s | 88s | -2s |
| 50 æ–‡ä»¶, 200 ç¬¦å· | 250s | 134s | **-116s** |
| 100 æ–‡ä»¶, 500 ç¬¦å· | 300s | 166s | **-134s** |

**ç»“è®º**: çŸ¥è¯†å›¾è°±å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿç†è§£ä»£ç ï¼Œä»è€Œåšå‡ºæ›´å¥½çš„ä¼˜åŒ–å†³ç­–ã€‚

---

## ğŸ“Œ ç»“è®º

1. **codeindex**: é€‚åˆå¿«é€Ÿã€ç²¾ç¡®ã€ç¦»çº¿çš„ä»£ç å®šä½
2. **LoomGraph**: é€‚åˆå¤æ‚æŸ¥è¯¢ã€è¯­ä¹‰æœç´¢ã€å›¢é˜Ÿåä½œ
3. **ç»„åˆä½¿ç”¨**: 
   - é¦–æ¬¡æ¢ç´¢ â†’ LoomGraph è¯­ä¹‰æœç´¢
   - ç²¾ç¡®å®šä½ â†’ codeindex é™æ€åˆ†æ
   - ç†è§£ä¾èµ– â†’ LoomGraph å…³ç³»å›¾è°±

**æ•ˆç‡æå‡**: ç›¸æ¯”ä¼ ç»Ÿ Grepï¼ŒçŸ¥è¯†å›¾è°±å·¥å…·æä¾› **7-18 å€**æ•ˆç‡æå‡ï¼Œå¹¶æ˜¾è‘—é™ä½è®¤çŸ¥è´Ÿæ‹…ã€‚

---

## ğŸ”§ é™„å½•ï¼šcodeindex å‘½ä»¤å‚è€ƒ

### ä¸¤ä¸ªæ ¸å¿ƒå‘½ä»¤

codeindex æä¾›ä¸¤ä¸ªäº’è¡¥çš„å‘½ä»¤ï¼Œåˆ†åˆ«æœåŠ¡äºä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š

#### 1. `codeindex parse <file>` - å•æ–‡ä»¶è§£æï¼ˆEpic 12, v0.13.0+ï¼‰

**ç”¨é€”**: è§£æå•ä¸ªæºæ–‡ä»¶ï¼Œè¾“å‡º JSON æ ¼å¼çš„ç¬¦å·ä¿¡æ¯

**è¾“å‡º**: JSON åˆ° stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰

**ä½¿ç”¨åœºæ™¯**:
- âœ… LoomGraph/LightRAG å·¥å…·é›†æˆ
- âœ… CI/CD ç®¡é“ä¸­çš„å¢é‡åˆ†æ
- âœ… Git hooks ä¸­çš„å˜æ›´æ–‡ä»¶å¤„ç†
- âœ… è‡ªå®šä¹‰å·¥å…·é“¾é›†æˆ

**ç¤ºä¾‹**:
```bash
# åŸºæœ¬ç”¨æ³•
codeindex parse src/myfile.py

# ç»“åˆ jq æŸ¥è¯¢
codeindex parse src/myfile.py | jq '.symbols[] | select(.kind == "function")'

# é›†æˆåˆ° LoomGraph
codeindex parse src/myfile.py | loomgraph import --stdin

# æ€§èƒ½ï¼š~0.1s/æ–‡ä»¶
time codeindex parse src/codeindex/parser.py
# real    0m0.099s
```

**è¾“å‡ºæ ¼å¼**:
```json
{
  "file_path": "src/myfile.py",
  "language": "python",
  "symbols": [
    {
      "name": "MyClass",
      "kind": "class",
      "signature": "class MyClass:",
      "docstring": "...",
      "line_start": 10,
      "line_end": 50
    }
  ],
  "imports": [...],
  "namespace": "",
  "error": null
}
```

**æ”¯æŒçš„è¯­è¨€**: Python, PHP, Java

---

#### 2. `codeindex scan <directory>` - ç›®å½•ç´¢å¼•ç”Ÿæˆ

**ç”¨é€”**: æ‰«æç›®å½•ï¼Œç”Ÿæˆ AI å¯è¯»çš„ README_AI.md æ–‡æ¡£

**è¾“å‡º**: README_AI.md æ–‡ä»¶ï¼ˆå†™å…¥ç£ç›˜ï¼‰

**ä½¿ç”¨åœºæ™¯**:
- âœ… Claude Code / AI åŠ©æ‰‹é›†æˆ
- âœ… é¡¹ç›®æ–‡æ¡£è‡ªåŠ¨åŒ–
- âœ… ä»£ç åº“æ¶æ„ç†è§£
- âœ… æ–°äºº onboarding

**ç¤ºä¾‹**:
```bash
# åŸºæœ¬ç”¨æ³•ï¼ˆç”Ÿæˆ README_AI.mdï¼‰
codeindex scan src/

# æ—  AI å¢å¼ºï¼ˆfallback æ¨¡å¼ï¼‰
codeindex scan src/ --fallback

# æ‰«ææ‰€æœ‰é…ç½®çš„ç›®å½•
codeindex scan-all

# è¾“å‡º JSONï¼ˆç”¨äºå·¥å…·é›†æˆï¼‰
codeindex scan src/ --output json > scan_results.json
```

**è¾“å‡ºæ–‡ä»¶**: `src/README_AI.md`
```markdown
# src/ - Project Overview

## Modules
- `auth.py`: Authentication and authorization logic
- `api.py`: REST API endpoints

## Key Classes
- `AuthManager`: Handles user authentication
- `TokenValidator`: JWT token validation
```

---

### LoomGraph é›†æˆæœ€ä½³å®è·µ

#### Cold Rebuildï¼ˆå®Œæ•´ç´¢å¼•ï¼‰
```bash
# æ­¥éª¤1: ä½¿ç”¨ scan ç”Ÿæˆç›®å½•æ–‡æ¡£
codeindex scan src/ --output json > src_scan.json

# æ­¥éª¤2: å¯¼å…¥åˆ° LoomGraph
loomgraph index --clear
loomgraph import src_scan.json
```

#### Warm Updateï¼ˆå¢é‡æ›´æ–°ï¼‰
```bash
# æ–¹å¼1: Git hook ç›‘å¬å˜æ›´ï¼ˆæ¨èï¼‰
git diff --name-only HEAD~1 | while read file; do
  codeindex parse "$file" | loomgraph import --stdin
done

# æ–¹å¼2: æ‰‹åŠ¨å•æ–‡ä»¶æ›´æ–°
codeindex parse src/changed_file.py | loomgraph import --stdin

# æ–¹å¼3: ç›®å½•å¢é‡æ‰«æ
codeindex scan src/ --output json | loomgraph import --stdin
```

#### æ€§èƒ½å¯¹æ¯”

| æ“ä½œ | å‘½ä»¤ | è€—æ—¶ | è¾“å‡º |
|------|------|------|------|
| å•æ–‡ä»¶è§£æ | `parse file.py` | 0.1s | JSON (stdout) |
| ç›®å½•æ‰«æ (10 æ–‡ä»¶) | `scan dir/` | 1s | README_AI.md |
| å®Œæ•´ç´¢å¼• (100 æ–‡ä»¶) | `scan-all` | 10s | å¤šä¸ª README_AI.md |

---

### å‘½ä»¤é€‰æ‹©å†³ç­–æ ‘

```
éœ€è¦è§£æä»£ç ï¼Ÿ
â”œâ”€ æ˜¯
â”‚  â”œâ”€ å•ä¸ªæ–‡ä»¶ï¼Ÿ
â”‚  â”‚  â””â”€ âœ… ä½¿ç”¨ `codeindex parse file.py`
â”‚  â”‚
â”‚  â””â”€ æ•´ä¸ªç›®å½•ï¼Ÿ
â”‚     â”œâ”€ éœ€è¦ JSON è¾“å‡ºï¼Ÿ
â”‚     â”‚  â””â”€ âœ… ä½¿ç”¨ `codeindex scan dir/ --output json`
â”‚     â”‚
â”‚     â””â”€ éœ€è¦æ–‡æ¡£ï¼Ÿ
â”‚        â””â”€ âœ… ä½¿ç”¨ `codeindex scan dir/`
â”‚
â””â”€ å¦
   â””â”€ æŸ¥çœ‹ç°æœ‰ç´¢å¼•
      â””â”€ âœ… è¯»å– README_AI.md
```

---

**å®éªŒæ‰§è¡Œè€…**: Claude Code
**é¡¹ç›®**: codeindex @ /Users/dreamlinx/Dropbox/Projects/codeindex
