# v0.4.0 Execution Plan: Quality & Experience

**Target Release**: 2026-02-28 (4 weeks)
**Sprint**: Sprint 1-2 (Feb 3 - Feb 28)
**Theme**: ä¿®å¤ PHP åé¦ˆ + ç´¢å¼•è´¨é‡æå‡
**Status**: ğŸš€ Ready to Start

---

## ğŸ¯ Sprint Goals

### Sprint 1 (Feb 3-14) - Core Improvements

**Goal**: è§£å†³ä¸šåŠ¡è¯­ä¹‰ç¼ºå¤±å’Œå¢é‡æ›´æ–°é—®é¢˜

**Stories**:
- Story 4.4: ä¸šåŠ¡è¯­ä¹‰æå–å¢å¼º â­â­â­
- Story 4.5: å¢é‡æ›´æ–°æœºåˆ¶ â­â­â­

**Success Criteria**:
- âœ… PROJECT_INDEX.md æœ‰ä¸šåŠ¡è¯­ä¹‰æè¿°
- âœ… å¢é‡æ‰«æé€Ÿåº¦æå‡ 80%+
- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡

### Sprint 2 (Feb 17-28) - Polish & Release

**Goal**: ä¼˜åŒ–ç¬¦å·ç´¢å¼•å’Œå‘å¸ƒå‡†å¤‡

**Stories**:
- Story 4.6: PROJECT_SYMBOLS ä¼˜åŒ– â­â­
- Story 4.7: PHPDoc æå–æ”¯æŒ â­
- Integration Testing & Release

---

## ğŸ“‹ Story 4.4: ä¸šåŠ¡è¯­ä¹‰æå–å¢å¼º

**Priority**: P0 - Critical
**Estimate**: 5 days
**Assignee**: Main Developer

### Problem Statement

**å½“å‰é—®é¢˜**ï¼ˆPHP é¡¹ç›®åé¦ˆï¼‰:
```
PROJECT_INDEX.md:
  Application/Admin/ â†’ "Business module"       # ğŸ˜ æ— åŒºåˆ†åº¦
  Application/Retail/ â†’ "Business module"      # ğŸ˜ æ— åŒºåˆ†åº¦

å„ç›®å½• README_AI.md:
  å­ç›®å½•æè¿°å…¨æ˜¯ "Module directory"            # ğŸ˜ æ— å¸®åŠ©
```

**æœŸæœ›æ•ˆæœ**:
```
PROJECT_INDEX.md:
  Application/Admin/ â†’ "åå°ç®¡ç†ç³»ç»Ÿï¼šç”¨æˆ·ã€æƒé™ã€å•†å“ç®¡ç†"  # ğŸ˜Š æœ‰ä¸šåŠ¡è¯­ä¹‰
  Application/Retail/ â†’ "é›¶å”®å‰å°ï¼šå•†å“å±•ç¤ºã€è´­ç‰©è½¦ã€æ”¯ä»˜"   # ğŸ˜Š æ¸…æ™°æ˜äº†

README_AI.md:
  Controller/ â†’ "æ§åˆ¶å™¨ç›®å½•ï¼šå¤„ç†HTTPè¯·æ±‚å’Œä¸šåŠ¡é€»è¾‘è·¯ç”±"
  Model/ â†’ "æ•°æ®æ¨¡å‹ï¼šå°è£…æ•°æ®åº“æ“ä½œå’Œä¸šåŠ¡è§„åˆ™"
```

### Technical Design

#### Component 1: ä¸šåŠ¡è¯­ä¹‰æå–å™¨

**File**: `src/codeindex/semantic_extractor.py` (new)

```python
from typing import List, Optional
from dataclasses import dataclass

@dataclass
class DirectoryContext:
    """ç›®å½•ä¸Šä¸‹æ–‡ä¿¡æ¯"""
    path: str
    files: List[str]
    subdirs: List[str]
    symbols: List[str]  # ä¸»è¦ç¬¦å·ï¼ˆç±»åã€å‡½æ•°åï¼‰
    imports: List[str]  # å¯¼å…¥è¯­å¥

@dataclass
class BusinessSemantic:
    """ä¸šåŠ¡è¯­ä¹‰"""
    description: str        # ä¸šåŠ¡æè¿°
    purpose: str           # ä¸»è¦ç”¨é€”
    key_components: List[str]  # å…³é”®ç»„ä»¶

class SemanticExtractor:
    """æå–ä¸šåŠ¡è¯­ä¹‰"""

    def extract_directory_semantic(
        self,
        context: DirectoryContext,
        use_ai: bool = True
    ) -> BusinessSemantic:
        """
        æå–ç›®å½•çš„ä¸šåŠ¡è¯­ä¹‰

        Strategy:
        1. åˆ†æç›®å½•ç»“æ„ï¼ˆæ–‡ä»¶åã€å­ç›®å½•åï¼‰
        2. åˆ†æä»£ç ç¬¦å·ï¼ˆç±»åã€å‡½æ•°åï¼‰
        3. å¦‚æœ use_ai=Trueï¼Œè°ƒç”¨ LLM ç”Ÿæˆä¸šåŠ¡æè¿°
        4. å¦åˆ™ï¼Œä½¿ç”¨å¯å‘å¼è§„åˆ™

        Args:
            context: ç›®å½•ä¸Šä¸‹æ–‡
            use_ai: æ˜¯å¦ä½¿ç”¨ AI å¢å¼º

        Returns:
            BusinessSemantic with description
        """
        if use_ai:
            return self._ai_extract(context)
        else:
            return self._heuristic_extract(context)

    def _ai_extract(self, context: DirectoryContext) -> BusinessSemantic:
        """ä½¿ç”¨ AI æå–ä¸šåŠ¡è¯­ä¹‰"""
        # Prepare prompt
        prompt = self._build_semantic_prompt(context)

        # Call AI
        response = self.ai_invoker.invoke(prompt)

        # Parse response
        return self._parse_ai_response(response)

    def _heuristic_extract(self, context: DirectoryContext) -> BusinessSemantic:
        """ä½¿ç”¨å¯å‘å¼è§„åˆ™ï¼ˆfallbackï¼‰"""
        # Rule-based description
        # Example: "Controller" in path â†’ "æ§åˆ¶å™¨ç›®å½•"
        #          "Model" in path â†’ "æ•°æ®æ¨¡å‹ç›®å½•"
        pass

    def _build_semantic_prompt(self, context: DirectoryContext) -> str:
        """æ„å»º AI prompt"""
        return f"""
Analyze this code directory and extract its business purpose.

Directory: {context.path}

Files: {', '.join(context.files[:10])}  # Top 10
Subdirectories: {', '.join(context.subdirs)}
Key Symbols: {', '.join(context.symbols[:20])}  # Top 20

Based on the file names, directory structure, and symbol names,
provide:
1. A concise business description (1-2 sentences, in Chinese)
2. Main purpose (what does this module do?)
3. Key components (2-3 main parts)

Output JSON format:
{{
  "description": "ç®€æ´çš„ä¸šåŠ¡æè¿°",
  "purpose": "ä¸»è¦ç”¨é€”",
  "key_components": ["ç»„ä»¶1", "ç»„ä»¶2"]
}}
"""
```

#### Component 2: SmartWriter å¢å¼º

**File**: `src/codeindex/writer.py` (modify existing)

```python
class SmartWriter:
    def __init__(self, config: Config):
        self.config = config
        self.semantic_extractor = SemanticExtractor(config)  # New

    def write_readme(
        self,
        scan_result: ScanResult,
        parse_result: ParseResult,
        use_ai: bool = True
    ) -> str:
        # ... existing code ...

        # New: Extract business semantic
        if self.config.enable_semantic_extraction:
            context = DirectoryContext(
                path=scan_result.path,
                files=[f.name for f in scan_result.files],
                subdirs=scan_result.subdirs,
                symbols=[s.name for s in parse_result.symbols],
                imports=[i.module for i in parse_result.imports]
            )

            semantic = self.semantic_extractor.extract_directory_semantic(
                context,
                use_ai=use_ai
            )

            # Use semantic in README generation
            readme_content = self._format_with_semantic(
                parse_result,
                semantic
            )
        else:
            # Old behavior
            readme_content = self._format_basic(parse_result)

        return readme_content
```

#### Component 3: PROJECT_INDEX ç”Ÿæˆå™¨å¢å¼º

**File**: `src/codeindex/indexer.py` (modify existing)

```python
def generate_project_index(self, root_path: str) -> str:
    """
    ç”Ÿæˆ PROJECT_INDEX.md with ä¸šåŠ¡è¯­ä¹‰

    Before:
      Application/Admin/ - Business module

    After:
      Application/Admin/ - åå°ç®¡ç†ç³»ç»Ÿï¼šç”¨æˆ·ã€æƒé™ã€å•†å“ç®¡ç†
    """
    # ... existing code to collect directories ...

    # New: For each directory, extract semantic
    directory_descriptions = {}
    for dir_path in directories:
        context = self._build_directory_context(dir_path)
        semantic = self.semantic_extractor.extract_directory_semantic(context)
        directory_descriptions[dir_path] = semantic.description

    # Generate index with rich descriptions
    index_content = self._format_index_with_semantics(
        directories,
        directory_descriptions
    )

    return index_content
```

### Implementation Tasks

**Task 4.4.1: åˆ›å»º SemanticExtractor** (2 days)
- [ ] Day 1: åˆ›å»º semantic_extractor.py
- [ ] Day 1: å®ç° DirectoryContext æ•°æ®æ”¶é›†
- [ ] Day 1: è®¾è®¡ AI prompt æ¨¡æ¿
- [ ] Day 2: å®ç° _ai_extract() æ–¹æ³•
- [ ] Day 2: å®ç° _heuristic_extract() fallback
- [ ] Day 2: å•å…ƒæµ‹è¯•

**Task 4.4.2: é›†æˆåˆ° SmartWriter** (1 day)
- [ ] ä¿®æ”¹ SmartWriter.write_readme()
- [ ] æ·»åŠ  enable_semantic_extraction é…ç½®é¡¹
- [ ] æ ¼å¼åŒ–é€»è¾‘æ›´æ–°
- [ ] é›†æˆæµ‹è¯•

**Task 4.4.3: PROJECT_INDEX å¢å¼º** (1 day)
- [ ] ä¿®æ”¹ generate_project_index()
- [ ] æ‰¹é‡è¯­ä¹‰æå–ï¼ˆé¿å…é‡å¤è°ƒç”¨ AIï¼‰
- [ ] æ ¼å¼ä¼˜åŒ–
- [ ] æµ‹è¯•ï¼ˆPHP é¡¹ç›®ï¼‰

**Task 4.4.4: éªŒè¯å’Œä¼˜åŒ–** (1 day)
- [ ] åœ¨ PHP é¡¹ç›®ä¸Šæµ‹è¯•
- [ ] éªŒè¯æè¿°è´¨é‡
- [ ] Prompt è°ƒä¼˜
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆæ‰¹é‡å¤„ç†ï¼‰

### Test Cases

```python
class TestSemanticExtractor:
    def test_extract_controller_semantic(self):
        """æµ‹è¯•æå– Controller ç›®å½•è¯­ä¹‰"""
        context = DirectoryContext(
            path="Application/Admin/Controller",
            files=["UserController.php", "ProductController.php"],
            subdirs=[],
            symbols=["UserController", "ProductController", "index", "edit"],
            imports=[]
        )

        semantic = extractor.extract_directory_semantic(context, use_ai=False)

        # Heuristic should recognize "Controller"
        assert "æ§åˆ¶å™¨" in semantic.description
        assert "Controller" not in semantic.description  # Translated

    def test_ai_extract_admin_module(self):
        """æµ‹è¯• AI æå– Admin æ¨¡å—è¯­ä¹‰"""
        context = DirectoryContext(
            path="Application/Admin",
            files=["..."],
            subdirs=["Controller", "Model", "View"],
            symbols=["UserController", "RoleModel", "..."],
            imports=[]
        )

        semantic = extractor.extract_directory_semantic(context, use_ai=True)

        # AI should infer business purpose
        assert "åå°" in semantic.description or "ç®¡ç†" in semantic.description
        assert len(semantic.key_components) >= 2
```

### Configuration

**File**: `.codeindex.yaml` (add options)

```yaml
# Semantic extraction (v0.4.0+)
semantic:
  enabled: true                  # Enable business semantic extraction
  use_ai: true                   # Use AI vs heuristic rules
  batch_size: 10                 # Process N directories per AI call
  cache_ttl: 86400               # Cache semantic for 24h

  # Heuristic rules (fallback when AI disabled)
  heuristics:
    keywords:
      Controller: "æ§åˆ¶å™¨ç›®å½•ï¼šå¤„ç†HTTPè¯·æ±‚å’Œä¸šåŠ¡é€»è¾‘"
      Model: "æ•°æ®æ¨¡å‹ç›®å½•ï¼šå°è£…æ•°æ®åº“æ“ä½œ"
      View: "è§†å›¾æ¨¡æ¿ç›®å½•ï¼šå‰ç«¯é¡µé¢æ¸²æŸ“"
      Service: "æœåŠ¡å±‚ç›®å½•ï¼šä¸šåŠ¡é€»è¾‘å°è£…"
      Repository: "æ•°æ®è®¿é—®å±‚ï¼šæ•°æ®åº“æ“ä½œå°è£…"
```

### Success Criteria

- âœ… PROJECT_INDEX.md æ¯ä¸ªç›®å½•æœ‰ç‹¬ç‰¹çš„ä¸šåŠ¡æè¿°
- âœ… README_AI.md å­ç›®å½•æè¿°ä¸å†æ˜¯é€šç”¨çš„ "Module directory"
- âœ… AI æè¿°å‡†ç¡®ç‡ â‰¥ 80%ï¼ˆäººå·¥è¯„ä¼°ï¼‰
- âœ… Fallback æ¨¡å¼ï¼ˆuse_ai=falseï¼‰ä¹Ÿèƒ½æä¾›åŸºæœ¬æè¿°
- âœ… æ€§èƒ½ï¼šå¢åŠ çš„æ—¶é—´ < 20%ï¼ˆæ‰¹é‡å¤„ç†ä¼˜åŒ–ï¼‰

---

## ğŸ“‹ Story 4.5: å¢é‡æ›´æ–°æœºåˆ¶

**Priority**: P1 - High
**Estimate**: 5 days
**Assignee**: Main Developer

### Problem Statement

**å½“å‰é—®é¢˜**:
```bash
# æ¯æ¬¡éƒ½å…¨é‡æ‰«æï¼Œå³ä½¿åªæ”¹äº†1ä¸ªæ–‡ä»¶
codeindex scan-all

# æ‰«æ100ä¸ªç›®å½•ï¼Œè€—æ—¶10åˆ†é’Ÿ
# ä½†å®é™…åªæœ‰3ä¸ªç›®å½•æœ‰å˜åŒ–
```

**æœŸæœ›æ•ˆæœ**:
```bash
# å¢é‡æ‰«æï¼šåªæ‰«æå˜åŒ–çš„ç›®å½•
codeindex scan-all --incremental

# æ£€æµ‹åˆ°3ä¸ªç›®å½•æœ‰å˜åŒ–
# åªæ‰«æè¿™3ä¸ªï¼Œè€—æ—¶30ç§’
# é€Ÿåº¦æå‡ 20xï¼
```

### Technical Design

#### Component 1: Git Diff Analyzer

**File**: `src/codeindex/git_diff.py` (new)

```python
import subprocess
from typing import List, Set
from pathlib import Path

class GitDiffAnalyzer:
    """åˆ†æ Git å˜æ›´ï¼Œè¯†åˆ«å—å½±å“çš„ç›®å½•"""

    def __init__(self, repo_path: str = "."):
        self.repo_path = repo_path

    def get_changed_files(
        self,
        since: str = "HEAD~1",
        until: str = "HEAD"
    ) -> List[str]:
        """
        è·å–å˜æ›´çš„æ–‡ä»¶åˆ—è¡¨

        Args:
            since: èµ·å§‹ commitï¼ˆé»˜è®¤ï¼šä¸Šæ¬¡ commitï¼‰
            until: ç»“æŸ commitï¼ˆé»˜è®¤ï¼šå½“å‰ HEADï¼‰

        Returns:
            List of changed file paths
        """
        cmd = [
            "git", "diff",
            "--name-only",
            f"{since}..{until}"
        ]

        result = subprocess.run(
            cmd,
            cwd=self.repo_path,
            capture_output=True,
            text=True,
            check=True
        )

        return result.stdout.strip().split('\n')

    def get_affected_directories(
        self,
        changed_files: List[str],
        scan_roots: List[str]
    ) -> Set[str]:
        """
        ä»å˜æ›´æ–‡ä»¶æ¨æ–­å—å½±å“çš„æ‰«æç›®å½•

        Args:
            changed_files: å˜æ›´çš„æ–‡ä»¶åˆ—è¡¨
            scan_roots: æ‰«ææ ¹ç›®å½•åˆ—è¡¨ï¼ˆfrom config.includeï¼‰

        Returns:
            Set of affected directories

        Example:
            changed_files = ["Application/Admin/Controller/UserController.php"]
            scan_roots = ["Application/"]

            Returns: {"Application/Admin/Controller"}
        """
        affected = set()

        for file in changed_files:
            file_path = Path(file)

            # æ‰¾åˆ°æ–‡ä»¶æ‰€å±çš„æ‰«æç›®å½•
            for root in scan_roots:
                if file.startswith(root):
                    # è·å–æ–‡ä»¶æ‰€åœ¨çš„ç›´æ¥ç›®å½•
                    dir_path = str(file_path.parent)
                    affected.add(dir_path)

        return affected

    def should_scan_incrementally(
        self,
        changed_files: List[str],
        threshold: int = 5
    ) -> bool:
        """
        åˆ¤æ–­æ˜¯å¦åº”è¯¥å¢é‡æ‰«æ

        Args:
            changed_files: å˜æ›´æ–‡ä»¶æ•°é‡
            threshold: é˜ˆå€¼ï¼ˆå˜æ›´æ–‡ä»¶ < threshold æ‰å€¼å¾—å¢é‡ï¼‰

        Returns:
            True if incremental scan recommended
        """
        # å¦‚æœå˜æ›´å¤ªå¤šï¼Œå…¨é‡æ‰«æå¯èƒ½æ›´å¿«
        return len(changed_files) < threshold
```

#### Component 2: Scanner å¢å¼º

**File**: `src/codeindex/scanner.py` (modify existing)

```python
class DirectoryScanner:
    def scan_all_incremental(
        self,
        root_path: str,
        config: Config,
        since: str = "HEAD~1"
    ) -> List[ScanResult]:
        """
        å¢é‡æ‰«æï¼šåªæ‰«æå˜åŒ–çš„ç›®å½•

        Workflow:
        1. ä½¿ç”¨ GitDiffAnalyzer è·å–å˜æ›´æ–‡ä»¶
        2. æ¨æ–­å—å½±å“çš„ç›®å½•
        3. åªæ‰«æè¿™äº›ç›®å½•
        4. å…¶ä»–ç›®å½•ä¿æŒåŸæœ‰ README_AI.md

        Args:
            root_path: é¡¹ç›®æ ¹ç›®å½•
            config: é…ç½®
            since: ä»å“ªä¸ª commit å¼€å§‹æ£€æµ‹å˜æ›´

        Returns:
            List of ScanResult (only changed directories)
        """
        git_analyzer = GitDiffAnalyzer(root_path)

        # Get changed files
        changed_files = git_analyzer.get_changed_files(since=since)

        if not changed_files:
            print("ğŸ“Š No files changed, skipping scan")
            return []

        # Should we use incremental?
        if not git_analyzer.should_scan_incrementally(changed_files):
            print(f"âš ï¸ Too many files changed ({len(changed_files)}), "
                  f"falling back to full scan")
            return self.scan_all(root_path, config)  # Full scan

        # Get affected directories
        affected_dirs = git_analyzer.get_affected_directories(
            changed_files,
            config.include
        )

        print(f"ğŸ“Š Detected {len(affected_dirs)} affected directories:")
        for dir_path in sorted(affected_dirs):
            print(f"  - {dir_path}")

        # Scan only affected directories
        results = []
        for dir_path in affected_dirs:
            result = self.scan_directory(dir_path, config)
            results.append(result)

        return results
```

#### Component 3: CLI Integration

**File**: `src/codeindex/cli/cli_scan.py` (modify)

```python
@click.command()
@click.option(
    '--incremental',
    is_flag=True,
    help='Only scan directories with changes (requires git)'
)
@click.option(
    '--since',
    default='HEAD~1',
    help='Git revision to compare against (default: HEAD~1)'
)
def scan_all(incremental, since):
    """Scan all configured directories"""
    config = load_config()
    scanner = DirectoryScanner()

    if incremental:
        # Incremental scan
        results = scanner.scan_all_incremental(
            root_path=".",
            config=config,
            since=since
        )

        if not results:
            click.echo("âœ… No changes detected, all up to date")
            return

        click.echo(f"âœ… Scanned {len(results)} changed directories")
    else:
        # Full scan (original behavior)
        results = scanner.scan_all(".", config)
        click.echo(f"âœ… Scanned {len(results)} directories")
```

### Implementation Tasks

**Task 4.5.1: Git Diff Analyzer** (2 days)
- [ ] Day 1: åˆ›å»º git_diff.py
- [ ] Day 1: å®ç° get_changed_files()
- [ ] Day 1: å®ç° get_affected_directories()
- [ ] Day 2: å®ç° should_scan_incrementally()
- [ ] Day 2: å•å…ƒæµ‹è¯•
- [ ] Day 2: é”™è¯¯å¤„ç†ï¼ˆé git ä»“åº“ï¼‰

**Task 4.5.2: Scanner é›†æˆ** (1 day)
- [ ] å®ç° scan_all_incremental()
- [ ] é›†æˆ GitDiffAnalyzer
- [ ] æµ‹è¯•ï¼ˆæ¨¡æ‹Ÿ git å˜æ›´ï¼‰

**Task 4.5.3: CLI å‘½ä»¤** (1 day)
- [ ] æ·»åŠ  --incremental flag
- [ ] æ·»åŠ  --since é€‰é¡¹
- [ ] è¿›åº¦æ˜¾ç¤ºä¼˜åŒ–
- [ ] Help æ–‡æ¡£

**Task 4.5.4: éªŒè¯å’Œæ€§èƒ½æµ‹è¯•** (1 day)
- [ ] çœŸå®é¡¹ç›®æµ‹è¯•
- [ ] æ€§èƒ½å¯¹æ¯”ï¼ˆå¢é‡ vs å…¨é‡ï¼‰
- [ ] Edge casesï¼ˆé¦–æ¬¡æ‰«æã€å¤§é‡å˜æ›´ï¼‰
- [ ] æ–‡æ¡£æ›´æ–°

### Test Cases

```python
class TestGitDiffAnalyzer:
    def test_get_changed_files(self, test_repo):
        """æµ‹è¯•è·å–å˜æ›´æ–‡ä»¶åˆ—è¡¨"""
        analyzer = GitDiffAnalyzer(test_repo)

        # Make a change
        modify_file("test.py")
        git_commit("test change")

        changed = analyzer.get_changed_files(since="HEAD~1")

        assert "test.py" in changed

    def test_get_affected_directories(self):
        """æµ‹è¯•æ¨æ–­å—å½±å“ç›®å½•"""
        analyzer = GitDiffAnalyzer()

        changed_files = [
            "Application/Admin/Controller/UserController.php",
            "Application/Admin/Model/UserModel.php"
        ]
        scan_roots = ["Application/"]

        affected = analyzer.get_affected_directories(
            changed_files,
            scan_roots
        )

        assert "Application/Admin/Controller" in affected
        assert "Application/Admin/Model" in affected

    def test_should_scan_incrementally(self):
        """æµ‹è¯•æ˜¯å¦åº”è¯¥å¢é‡æ‰«æ"""
        analyzer = GitDiffAnalyzer()

        # Few changes â†’ incremental
        assert analyzer.should_scan_incrementally(["a.py", "b.py"], threshold=5)

        # Many changes â†’ full scan
        assert not analyzer.should_scan_incrementally(
            ["a.py"] * 10,
            threshold=5
        )
```

### Configuration

```yaml
# Incremental scan (v0.4.0+)
incremental:
  enabled: true                  # Enable incremental scan
  since: "HEAD~1"                # Default: compare with last commit
  threshold: 20                  # If >20 files changed, do full scan

  # Advanced
  include_untracked: false       # Include untracked files in change detection
  ignore_patterns:               # Ignore certain files in change detection
    - "**/*.md"                  # Ignore markdown changes
    - "**/test/**"               # Ignore test file changes
```

### Success Criteria

- âœ… å¢é‡æ‰«æé€Ÿåº¦æå‡ 80%+ï¼ˆ3ä¸ªç›®å½• vs 100ä¸ªç›®å½•ï¼‰
- âœ… å‡†ç¡®è¯†åˆ«å—å½±å“çš„ç›®å½•ï¼ˆ100% è¦†ç›–ï¼‰
- âœ… å¤„ç† edge casesï¼ˆé git ä»“åº“ã€é¦–æ¬¡æ‰«æã€å¤§é‡å˜æ›´ï¼‰
- âœ… ç”¨æˆ·ä½“éªŒï¼šæ¸…æ™°çš„è¿›åº¦æç¤º
- âœ… å‘åå…¼å®¹ï¼š--incremental æ˜¯å¯é€‰çš„

---

## ğŸ“… Sprint Timeline

### Week 1 (Feb 3-7)

| Day | Tasks | Deliverables |
|-----|-------|-------------|
| Mon | Task 4.4.1 (Day 1) | SemanticExtractor éª¨æ¶ |
| Tue | Task 4.4.1 (Day 2) | AI prompt + tests |
| Wed | Task 4.4.2 | SmartWriter é›†æˆ |
| Thu | Task 4.4.3 | PROJECT_INDEX å¢å¼º |
| Fri | Task 4.4.4 | éªŒè¯ + ä¼˜åŒ– |

### Week 2 (Feb 10-14)

| Day | Tasks | Deliverables |
|-----|-------|-------------|
| Mon | Task 4.5.1 (Day 1) | GitDiffAnalyzer åŸºç¡€ |
| Tue | Task 4.5.1 (Day 2) | å®Œæ•´å®ç° + tests |
| Wed | Task 4.5.2 | Scanner é›†æˆ |
| Thu | Task 4.5.3 | CLI å‘½ä»¤ |
| Fri | Task 4.5.4 | éªŒè¯ + æ€§èƒ½æµ‹è¯• |

### Week 3 (Feb 17-21) - Story 4.6 + 4.7

### Week 4 (Feb 24-28) - Integration + Release

---

## ğŸ¯ Definition of Done

### Story Level

- âœ… All tasks completed
- âœ… All tests passing (unit + integration)
- âœ… Code reviewed
- âœ… Documentation updated
- âœ… Manually tested on PHP project

### Sprint Level

- âœ… All P0 stories completed
- âœ… PHP é¡¹ç›®åé¦ˆéªŒè¯é€šè¿‡
- âœ… No critical bugs
- âœ… Performance benchmarks met
- âœ… CHANGELOG updated
- âœ… Release notes drafted

---

## ğŸ“Š Metrics to Track

### Development Metrics

| Metric | Target |
|--------|--------|
| Test Coverage | â‰¥ 85% |
| Code Quality (ruff) | 0 errors |
| Documentation | 100% functions documented |

### Performance Metrics

| Metric | Baseline | Target |
|--------|----------|--------|
| å¢é‡æ‰«æé€Ÿåº¦ | N/A | <20% full scan time |
| ä¸šåŠ¡è¯­ä¹‰å‡†ç¡®ç‡ | N/A | â‰¥80% |
| PROJECT_INDEX è´¨é‡ | â­â­ | â­â­â­â­ |

---

## ğŸš€ Ready to Execute

**Status**: âœ… è§„åˆ’å®Œæˆï¼Œå¯ç«‹å³å¼€å§‹
**First Task**: Task 4.4.1 - åˆ›å»º SemanticExtractor
**Start Date**: 2026-02-03 (Monday)

---

Generated: 2026-02-01
Sprint: 1-2 (v0.4.0)
Next Review: 2026-02-07 (Friday standup)
